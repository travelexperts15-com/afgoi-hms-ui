<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AFGOI HOSPITAL ‚Äì OPD (Outpatient Department)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --primary: #2563EB;
      --primary-dark: #1D4ED8;
      --bg: #778fd7; /* same background as dashboard */
      --card-bg: #FFFFFF;
      --text-main: #111827;
      --text-muted: #6B7280;
      --border-soft: #E5E7EB;
      --accent-green: #10B981;
      --danger: #EF4444;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background-color: var(--bg);
      color: var(--text-main);
    }

    .layout { display: flex; height: 100vh; overflow: hidden; }

    /* Sidebar */
    .sidebar {
      width: 260px;
      background: #0B1120;
      color: #E5E7EB;
      display: flex;
      flex-direction: column;
    }

    .sidebar-header {
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid rgba(148, 163, 184, 0.3);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .logo-circle {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #38BDF8, #2563EB);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.95rem;
      color: white;
    }

    .sidebar-title { display: flex; flex-direction: column; gap: 0.15rem; }
    .sidebar-title-main { font-size: 0.9rem; font-weight: 600; letter-spacing: 0.03em; }
    .sidebar-title-sub { font-size: 0.75rem; color: #9CA3AF; }

    .sidebar-nav { padding: 1rem 0.5rem 1.25rem; overflow-y: auto; flex: 1; }

    .nav-section-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #6B7280;
      padding: 0.25rem 1rem;
      margin-bottom: 0.25rem;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.55rem 1rem;
      margin: 0.15rem 0.5rem;
      border-radius: 0.6rem;
      font-size: 0.86rem;
      color: #E5E7EB;
      cursor: pointer;
      border-left: 3px solid transparent;
      transition: background 0.15s ease, border-color 0.15s ease, color 0.15s ease;
      text-decoration: none;
    }

    .nav-item span.icon { font-size: 1rem; width: 1.4rem; text-align: center; }
    .nav-item:hover { background: rgba(37, 99, 235, 0.12); }
    .nav-item.active {
      background: rgba(37, 99, 235, 0.18);
      border-left-color: var(--primary);
      color: #FFFFFF;
    }

    .sidebar-footer {
      padding: 0.75rem 1rem;
      border-top: 1px solid rgba(148, 163, 184, 0.3);
      font-size: 0.75rem;
      color: #6B7280;
    }
    .sidebar-footer span { display: block; }

    /* Main */
    .main { flex: 1; display: flex; flex-direction: column; min-width: 0; }

    .topbar {
      height: 64px;
      background: #FFFFFF;
      border-bottom: 1px solid var(--border-soft);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 1.5rem;
      gap: 1rem;
    }

    .topbar-left { display: flex; flex-direction: column; gap: 0.15rem; }
    .topbar-title { font-size: 1.05rem; font-weight: 600; }
    .topbar-subtitle { font-size: 0.82rem; color: var(--text-muted); }

    .topbar-center { flex: 1; max-width: 420px; }
    .search-input-top {
      width: 100%;
      padding: 0.45rem 0.7rem;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      font-size: 0.85rem;
      outline: none;
    }
    .search-input-top:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.25);
    }

    .topbar-right { display: flex; align-items: center; gap: 1rem; }
    .status-pill {
      font-size: 0.78rem;
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      background: rgba(16, 185, 129, 0.06);
      color: var(--accent-green);
      border: 1px solid rgba(16, 185, 129, 0.2);
    }
    .user-chip { display: flex; align-items: center; gap: 0.55rem; }
    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: linear-gradient(135deg, #38BDF8, #2563EB);
      display: flex; align-items: center; justify-content: center;
      font-size: 0.8rem; color: #FFFFFF; font-weight: 600;
    }
    .user-meta { font-size: 0.8rem; display: flex; flex-direction: column; gap: 0.05rem; }
    .user-name { font-weight: 500; }
    .user-role { color: #6B7280; }

    .content { flex: 1; padding: 1.25rem 1.5rem 1.5rem; overflow-y: auto; }

    .content-header { margin-bottom: 1rem; }
    .content-title { font-size: 1.2rem; font-weight: 600; margin-bottom: 0.25rem; }
    .content-subtitle { font-size: 0.85rem; color: #E5E7EB; }

    /* Filters card */
    .filters-card {
      margin-top: 0.5rem;
      background: rgba(15, 23, 42, 0.08);
      border-radius: 0.9rem;
      border: 1px solid rgba(148, 163, 184, 0.5);
      padding: 0.9rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      align-items: center;
    }

    .select, .search-input {
      min-width: 160px;
      padding: 0.45rem 0.7rem;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      font-size: 0.85rem;
      background: #FFFFFF;
      outline: none;
    }
    .search-input { flex: 1; min-width: 220px; }
    .select:focus, .search-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.25);
    }

    .btn-primary {
      padding: 0.45rem 0.9rem;
      border-radius: 999px;
      border: 1px solid var(--primary-dark);
      background: var(--primary);
      color: #FFFFFF;
      font-size: 0.85rem;
      cursor: pointer;
    }

    /* OPD Summary cards */
    .summary-grid {
      margin-top: 1rem;
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 0.9rem;
    }
    .card {
      background: var(--card-bg);
      border-radius: 0.85rem;
      border: 1px solid var(--border-soft);
      padding: 0.8rem 0.9rem;
      box-shadow: 0 1px 2px rgba(15, 23, 42, 0.04);
    }
    .card-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      margin-bottom: 0.15rem;
    }
    .card-value {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 0.15rem;
    }
    .card-note {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    /* Table */
    .card-table {
      margin-top: 1.1rem;
      background: var(--card-bg);
      border-radius: 0.9rem;
      border: 1px solid var(--border-soft);
      box-shadow: 0 1px 2px rgba(15, 23, 42, 0.04);
      padding: 0.85rem;
    }
    .card-table-title {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }
    .card-table-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 0.75rem;
    }

    .table-wrapper {
      overflow-x: auto;
      border-radius: 0.7rem;
      border: 1px solid var(--border-soft);
      background: #FFFFFF;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      min-width: 900px;
    }
    thead { background: #F9FAFB; }
    th, td {
      padding: 0.55rem 0.7rem;
      text-align: left;
      border-bottom: 1px solid var(--border-soft);
    }
    th {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #6B7280;
    }
    tr:hover td { background: #F9FAFB; }

    .pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.2rem 0.55rem;
      border-radius: 999px;
      font-size: 0.72rem;
      font-weight: 500;
      white-space: nowrap;
    }
    .pill-green { background: rgba(16, 185, 129, 0.08); color: var(--accent-green); }
    .pill-yellow { background: rgba(245, 158, 11, 0.1); color: #B45309; }
    .pill-red { background: rgba(239, 68, 68, 0.12); color: var(--danger); }
    .pill-blue { background: rgba(37, 99, 235, 0.1); color: var(--primary-dark); }

    @media (max-width: 1024px) {
      .layout { flex-direction: column; }
      .sidebar {
        width: 100%;
        height: auto;
        flex-direction: row;
        overflow-x: auto;
      }
      .sidebar-header { display: none; }
      .sidebar-nav { display: flex; padding: 0.4rem; }
      .nav-item { margin: 0.15rem; padding: 0.4rem 0.6rem; border-radius: 999px; }
      .sidebar-footer { display: none; }
      .content { padding: 1rem; }
      .summary-grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
    }

    @media (max-width: 480px) {
      .topbar-center { display: none; }
      .summary-grid { grid-template-columns: 1fr; }
      table { min-width: 720px; }
      .filters-card { flex-direction: column; }
    }
  </style>
</head>
<body>
<div class="layout">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo-circle">AH</div>
      <div class="sidebar-title">
        <span class="sidebar-title-main">AFGOI HOSPITAL</span>
        <span class="sidebar-title-sub">Hospital Management System</span>
      </div>
    </div>

    <nav class="sidebar-nav">
      <div style="width:100%;">
        <div class="nav-section-label">Main Modules</div>

        <a class="nav-item" href="afgoi-hms-dashboard.html">
          <span class="icon">üè†</span><span>Dashboard (Overview)</span>
        </a>

        <a class="nav-item" href="doctors.html">
          <span class="icon">üë®‚Äç‚öïÔ∏è</span><span>Doctors</span>
        </a>

        <a class="nav-item" href="nurses.html">
          <span class="icon">üë©‚Äç‚öïÔ∏è</span><span>Nurses</span>
        </a>

        <a class="nav-item" href="patients.html">
          <span class="icon">üßë‚Äçü¶Ω</span><span>Patients</span>
        </a>

        <a class="nav-item" href="admissions.html">
          <span class="icon">üì•</span><span>Admissions</span>
        </a>

        <a class="nav-item active" href="opd.html">
          <span class="icon">üè•</span><span>OPD</span>
        </a>

        <a class="nav-item" href="laboratory.html">
          <span class="icon">üß™</span><span>Laboratory</span>
        </a>

        <a class="nav-item" href="radiology.html">
          <span class="icon">üñ•Ô∏è</span><span>Radiology / X-Ray</span>
        </a>

        <a class="nav-item" href="surgery.html">
          <span class="icon">ü©∫</span><span>Surgery</span>
        </a>

        <a class="nav-item" href="pharmacy.html">
          <span class="icon">üíä</span><span>Pharmacy</span>
        </a>

        <a class="nav-item" href="billing.html">
          <span class="icon">üí∞</span><span>Billing</span>
        </a>

        <a class="nav-item" href="inventory.html">
          <span class="icon">üì¶</span><span>Inventory</span>
        </a>

        <a class="nav-item" href="hr.html">
          <span class="icon">üßë‚Äçüíº</span><span>HR & Staff</span>
        </a>

        <a class="nav-item" href="emergency.html">
          <span class="icon">üö®</span><span>Emergency</span>
        </a>

        <a class="nav-item" href="discharge.html">
          <span class="icon">‚úÖ</span><span>Discharge</span>
        </a>

        <a class="nav-item" href="settings.html">
          <span class="icon">‚öôÔ∏è</span><span>Settings</span>
        </a>
      </div>
    </nav>

    <div class="sidebar-footer">
      <span>¬© 2025 ‚Äì AFGOI HMS</span>
      <span>All Rights Reserved.</span>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <header class="topbar">
      <div class="topbar-left">
        <div class="topbar-title">OPD ‚Äì Outpatient Department</div>
        <div class="topbar-subtitle">
          Today‚Äôs visits, triage status & doctor allocation in one place.
        </div>
      </div>
      <div class="topbar-center">
        <input class="search-input-top" id="searchTop" placeholder="Quick search by patient, ID or doctor‚Ä¶" />
      </div>
      <div class="topbar-right">
        <span class="status-pill">System Status: Online</span>
        <div class="user-chip">
          <div class="user-avatar">AD</div>
          <div class="user-meta">
            <span class="user-name">Admin ‚Äì AFGOI</span>
            <span class="user-role">Super Admin</span>
          </div>
        </div>
      </div>
    </header>

    <section class="content">
      <div class="content-header">
        <h1 class="content-title">Today‚Äôs OPD Visits</h1>
        <p class="content-subtitle">
          Filter by clinic, triage level & visit status. (Front-end demo ‚Äì later will connect to real AFGOI HMS data.)
        </p>
      </div>

      <!-- Filters -->
      <div class="filters-card">
        <select id="clinicFilter" class="select">
          <option value="ALL">All Clinics</option>
          <option value="General Medicine">General Medicine</option>
          <option value="Pediatrics">Pediatrics</option>
          <option value="Surgery">Surgery</option>
          <option value="Maternity">Maternity</option>
          <option value="Dental">Dental</option>
        </select>

        <select id="triageFilter" class="select">
          <option value="ALL">All Triage Levels</option>
          <option value="Routine">Routine</option>
          <option value="Urgent">Urgent</option>
          <option value="Emergency">Emergency</option>
        </select>

        <select id="statusFilter" class="select">
          <option value="ALL">All Status</option>
          <option value="Waiting">Waiting</option>
          <option value="In Consultation">In Consultation</option>
          <option value="Completed">Completed</option>
          <option value="No-show">No-show</option>
        </select>

        <input id="searchInput" class="search-input" placeholder="Search by patient name or visit ID‚Ä¶" />

        <button class="btn-primary" type="button">
          + New OPD Visit
        </button>
      </div>

      <!-- Summary cards -->
      <div class="summary-grid">
        <div class="card">
          <div class="card-label">Total Visits Today</div>
          <div class="card-value" id="totalVisits">0</div>
          <div class="card-note">All clinics combined</div>
        </div>
        <div class="card">
          <div class="card-label">Waiting</div>
          <div class="card-value" id="waitingCount">0</div>
          <div class="card-note">Patients still in waiting area</div>
        </div>
        <div class="card">
          <div class="card-label">In Consultation</div>
          <div class="card-value" id="inConsultCount">0</div>
          <div class="card-note">Currently with doctors</div>
        </div>
        <div class="card">
          <div class="card-label">Completed</div>
          <div class="card-value" id="completedCount">0</div>
          <div class="card-note">Consultations finished today</div>
        </div>
      </div>

      <!-- OPD table -->
      <div class="card-table">
        <div class="card-table-title">OPD Queue ‚Äì Today</div>
        <div class="card-table-subtitle">
          Demo rows: later will be fetched from database (visits, triage, status).
        </div>

        <div class="table-wrapper">
          <table>
            <thead>
            <tr>
              <th>Visit ID</th>
              <th>Patient</th>
              <th>Clinic</th>
              <th>Doctor</th>
              <th>Triage</th>
              <th>Visit Type</th>
              <th>Status</th>
              <th>Time</th>
            </tr>
            </thead>
            <tbody id="opdBody">
            <!-- JS injects rows -->
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </main>
</div>

<script>
  const opdVisits = [
    {
      id: "OPD-2001",
      patient: "Ahmed Ali (#P-1021)",
      clinic: "General Medicine",
      doctor: "Dr. Mohamed",
      triage: "Routine",
      visitType: "Follow-up",
      status: "Waiting",
      time: "08:30"
    },
    {
      id: "OPD-2002",
      patient: "Hodan Ismail (#P-1033)",
      clinic: "Surgery",
      doctor: "Dr. Abdi",
      triage: "Urgent",
      visitType: "New Visit",
      status: "In Consultation",
      time: "08:45"
    },
    {
      id: "OPD-2003",
      patient: "Yasin Noor (#P-0998)",
      clinic: "General Medicine",
      doctor: "Dr. Hassan",
      triage: "Emergency",
      visitType: "New Visit",
      status: "Completed",
      time: "07:55"
    },
    {
      id: "OPD-2004",
      patient: "Ifrah Noor (#P-1049)",
      clinic: "Pediatrics",
      doctor: "Dr. Abdihakin",
      triage: "Routine",
      visitType: "Follow-up",
      status: "Waiting",
      time: "09:10"
    },
    {
      id: "OPD-2005",
      patient: "Fartun Omar (#P-1005)",
      clinic: "Maternity",
      doctor: "Dr. Asha",
      triage: "Urgent",
      visitType: "New Visit",
      status: "Waiting",
      time: "09:25"
    },
    {
      id: "OPD-2006",
      patient: "Abdirahman Aden (#P-1102)",
      clinic: "General Medicine",
      doctor: "Dr. Ladan",
      triage: "Routine",
      visitType: "Follow-up",
      status: "No-show",
      time: "08:10"
    }
  ];

  const clinicFilter = document.getElementById("clinicFilter");
  const triageFilter = document.getElementById("triageFilter");
  const statusFilter = document.getElementById("statusFilter");
  const searchInput = document.getElementById("searchInput");
  const searchTop = document.getElementById("searchTop");
  const tbody = document.getElementById("opdBody");

  const totalVisitsEl = document.getElementById("totalVisits");
  const waitingCountEl = document.getElementById("waitingCount");
  const inConsultCountEl = document.getElementById("inConsultCount");
  const completedCountEl = document.getElementById("completedCount");

  function getSearchText() {
    return (searchInput.value || searchTop.value || "").toLowerCase().trim();
  }

  function getTriageClass(triage) {
    if (triage === "Routine") return "pill-blue";
    if (triage === "Urgent") return "pill-yellow";
    if (triage === "Emergency") return "pill-red";
    return "pill-blue";
  }

  function getStatusClass(status) {
    if (status === "Waiting") return "pill-yellow";
    if (status === "In Consultation") return "pill-blue";
    if (status === "Completed") return "pill-green";
    if (status === "No-show") return "pill-red";
    return "pill-blue";
  }

  function renderOPD(list) {
    tbody.innerHTML = "";

    if (list.length === 0) {
      const row = document.createElement("tr");
      const cell = document.createElement("td");
      cell.colSpan = 8;
      cell.style.textAlign = "center";
      cell.style.padding = "1rem 0";
      cell.textContent = "No OPD visits found for selected filters.";
      row.appendChild(cell);
      tbody.appendChild(row);

      totalVisitsEl.textContent = 0;
      waitingCountEl.textContent = 0;
      inConsultCountEl.textContent = 0;
      completedCountEl.textContent = 0;
      return;
    }

    // Summary counts
    totalVisitsEl.textContent = list.length;
    waitingCountEl.textContent = list.filter(v => v.status === "Waiting").length;
    inConsultCountEl.textContent = list.filter(v => v.status === "In Consultation").length;
    completedCountEl.textContent = list.filter(v => v.status === "Completed").length;

    list.forEach(v => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${v.id}</td>
        <td>${v.patient}</td>
        <td>${v.clinic}</td>
        <td>${v.doctor}</td>
        <td><span class="pill ${getTriageClass(v.triage)}">${v.triage}</span></td>
        <td>${v.visitType}</td>
        <td><span class="pill ${getStatusClass(v.status)}">${v.status}</span></td>
        <td>${v.time}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  function applyFilters() {
    const clinic = clinicFilter.value;
    const triage = triageFilter.value;
    const status = statusFilter.value;
    const query = getSearchText();

    const filtered = opdVisits.filter(v => {
      const clinicMatch = clinic === "ALL" || v.clinic === clinic;
      const triageMatch = triage === "ALL" || v.triage === triage;
      const statusMatch = status === "ALL" || v.status === status;
      const searchMatch =
        !query ||
        v.patient.toLowerCase().includes(query) ||
        v.id.toLowerCase().includes(query) ||
        v.doctor.toLowerCase().includes(query);

      return clinicMatch && triageMatch && statusMatch && searchMatch;
    });

    renderOPD(filtered);
  }

  clinicFilter.addEventListener("change", applyFilters);
  triageFilter.addEventListener("change", applyFilters);
  statusFilter.addEventListener("change", applyFilters);
  searchInput.addEventListener("input", applyFilters);
  searchTop.addEventListener("input", applyFilters);

  // initial render
  renderOPD(opdVisits);
</script>
</body>
</html>
